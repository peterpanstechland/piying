# 皮影互动系统 - 打包交付指南

## 🎯 目标

创建一个专业的桌面应用，甲方可以：
- 双击安装/运行
- 无需安装 Python、Node.js 等环境
- 启动后有选择界面：进入体验 或 进入管理后台

## 📦 打包方案

### 方案一：便携版（推荐，最快）

**适用场景**：快速交付、测试验证

```bash
create-portable-app.bat
```

**输出**：
```
ShadowPuppet-Portable/
├── 皮影互动系统.bat    # 主启动器（带菜单选择）
├── 启动.bat            # 快捷启动
├── 停止系统.bat        # 停止服务
├── 使用说明.txt        # 使用文档
├── venv/               # Python 环境
├── backend/            # 后端代码
├── frontend/dist/      # 用户前端
├── admin-frontend/dist/ # 管理后台前端
├── assets/             # 资源文件
└── config/             # 配置文件
```

**甲方使用**：
1. 解压文件夹
2. 双击 `皮影互动系统.bat`
3. 看到菜单后选择 [1] 或 [2]

---

### 方案二：Electron 安装包（专业）

**适用场景**：正式交付、专业体验

```bash
build-electron-app.bat
```

**输出**：
```
electron-app/dist/
├── 皮影互动系统-Setup-1.0.0.exe  # 安装程序
└── 皮影互动系统-Portable-1.0.0.exe  # 便携版
```

**特点**：
- 专业的安装向导
- 桌面快捷方式
- 开始菜单项
- 系统托盘图标
- 美观的启动界面

**甲方使用**：
1. 双击安装程序
2. 按向导安装
3. 双击桌面图标
4. 在启动界面选择功能

---

## 🚀 快速开始

### 步骤 1：确保环境就绪

```bash
# 检查 Node.js
node --version  # 需要 18+

# 检查 Python 虚拟环境
dir venv  # 应该存在
```

### 步骤 2：选择打包方式

**快速交付**（5分钟）：
```bash
create-portable-app.bat
```

**专业交付**（15分钟）：
```bash
build-electron-app.bat
```

### 步骤 3：测试打包结果

便携版测试：
```bash
cd ShadowPuppet-Portable
皮影互动系统.bat
```

Electron 版测试：
```bash
cd electron-app
npm start
```

---

## 🎨 启动界面预览

### 便携版（命令行菜单）

```
    ╔══════════════════════════════════════╗
    ║                                      ║
    ║        🎭 皮影互动系统 🎭            ║
    ║                                      ║
    ║   Shadow Puppet Interactive System   ║
    ║                                      ║
    ╠══════════════════════════════════════╣
    ║                                      ║
    ║   [1] 开始体验 - 进入互动界面        ║
    ║                                      ║
    ║   [2] 管理后台 - 系统配置管理        ║
    ║                                      ║
    ║   [3] 重启服务                       ║
    ║                                      ║
    ║   [4] 退出程序                       ║
    ║                                      ║
    ╚══════════════════════════════════════╝
```

### Electron 版（图形界面）

- 美观的渐变背景
- 两个大按钮：「开始体验」「管理后台」
- 服务状态指示器
- 系统托盘支持

---

## 📋 交付清单

### 给甲方的文件

| 文件 | 说明 | 大小 |
|------|------|------|
| `ShadowPuppet-Portable.zip` | 便携版（解压即用） | ~500MB |
| `皮影互动系统-Setup-1.0.0.exe` | 安装程序 | ~500MB |
| `使用说明.pdf` | 用户手册 | ~1MB |

### 甲方操作指南

**便携版**：
```
1. 解压 ShadowPuppet-Portable.zip
2. 双击 "皮影互动系统.bat"
3. 等待服务启动（约 8 秒）
4. 选择 [1] 开始体验 或 [2] 管理后台
```

**安装版**：
```
1. 双击 "皮影互动系统-Setup-1.0.0.exe"
2. 按向导完成安装
3. 双击桌面图标 "皮影互动系统"
4. 在启动界面选择功能
```

**管理员登录**：
```
网址：http://localhost:8000/admin
账号：admin
密码：admin123
⚠️ 首次登录后请立即修改密码！
```

---

## 🔧 常见问题

### Q: 打包失败怎么办？

1. 确保前端已构建：
   ```bash
   cd frontend && npm run build
   cd ../admin-frontend && npm run build
   ```

2. 确保 Python 环境存在：
   ```bash
   dir venv\Scripts\python.exe
   ```

3. 检查 Node.js 版本：
   ```bash
   node --version  # 需要 18+
   ```

### Q: Electron 打包很慢？

首次打包需要下载 Electron 二进制文件（约 200MB），后续会使用缓存。

### Q: 如何自定义应用图标？

将 256x256 的 ICO 文件放到：
```
electron-app/build/icon.ico
```

### Q: 如何修改应用名称？

编辑 `electron-app/package.json`：
```json
{
  "productName": "你的应用名称"
}
```

---

## 📊 方案对比

| 特性 | 便携版 | Electron 版 |
|------|--------|-------------|
| 打包时间 | 5 分钟 | 15 分钟 |
| 包大小 | ~500MB | ~500MB |
| 安装体验 | 解压即用 | 专业安装向导 |
| 启动界面 | 命令行菜单 | 图形界面 |
| 系统托盘 | ❌ | ✅ |
| 桌面快捷方式 | 手动创建 | 自动创建 |
| 开始菜单 | ❌ | ✅ |
| 推荐场景 | 快速测试 | 正式交付 |

---

## 🎉 总结

1. **快速交付**：运行 `create-portable-app.bat`
2. **专业交付**：运行 `build-electron-app.bat`
3. **测试验证**：确保两个入口都能正常工作
4. **发送给甲方**：压缩后发送，附带使用说明

甲方收到后，双击即可使用，无需任何技术知识！
